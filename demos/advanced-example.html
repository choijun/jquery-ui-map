<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head profile="http://dublincore.org/documents/dcq-html/">
        
        <title>Example with Google Streetview with microformats - Google maps jQuery plugin</title>
        <meta name="keywords" content="Google maps, jQuery, plugin, Google Streetview, Geo search" />
		<meta name="description" content="An example with jQuery, Google Streetview, Google Geo search and microformats using Google maps jQuery plugin" />
		
		<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
		<meta name="DC.title" content="Example with Google Streetview with microformats - Google maps jQuery plugin" />
		<meta name="DC.subject" content="Google maps;jQuery;plugin;Google Streetview;Geo search" />
		<meta name="DC.description" content="An example with jQuery, Google Streetview, Google Geo search and microformats using Google maps jQuery plugin" />
		<meta name="DC.creator" content="Johan S&auml;ll Larsson" />
		
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
		
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssreset/reset-min.css" />
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssbase/base-min.css" />
		<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssfonts/fonts-min.css" />
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css" />	 
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        
        <script src="http://www.google.com/jsapi?key=ABQIAAAAahcO7noe62FuOIQacCQQ7RTHkUDJMJAZieEeKAqNDtpKxMhoFxQsdtJdv3FJ1dT3WugUNJb7xD-jsQ" type="text/javascript"></script>        
        <script type="text/javascript">
		//<![CDATA[
			google.load("maps", "3", {'other_params':'sensor=true'});
			google.load("jquery", "1.5");
			google.load("jqueryui", "1.8.9");
		//]]>
		</script>
        <script type="text/javascript" src="../ui/jquery.ui.map.js"></script>
        <script type="text/javascript">
		//<![CDATA[
			$(function() {
				
				$('#map_canvas').gmap({ 'center': getLatLng(), 'streetViewControl': false, 'callback': 
					function() {
						$('#map_canvas').gmap('loadHTML', 'microformat', '.vevent', 
							function(markeropts, node, index) {
								var clone = $(node).clone().addClass('ui-dialog-vevent').append('<div id="streetview{0}" class="streetview"></div>'.replace('{0}', index));
								var summary = $(node).find('.summary');							
								$('#map_canvas').gmap('addMarker', jQuery.extend( { 'title': summary.html(), 'icon':new google.maps.MarkerImage('http://google-maps-icons.googlecode.com/files/music-rock.png') }, markeropts), function(map, marker) {
									$(summary).click( function() {
										$(marker).triggerEvent('click');
										return false;
									}); 
								}).click(function() {
									var self = $(this).get(0);
									self.map.panTo(self.position);
									// Demonstration purpose only...
									setTimeout(function() { self.map.setZoom(15) }, 2000);
									$(clone).dialog({ 'modal': true, 'width': 530, 'title': summary.html(), 'resizable': false, 'draggable': false });
									$('#map_canvas').gmap('loadStreetViewPanorama', 'streetview{0}'.replace('{0}', index), { 'position': $(this).get(0).position });
								});
							}
						);
					}
				});
				
				function getLatLng() {
					if ( google.loader.ClientLocation != null ) {
						return new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);	
					}
					return new google.maps.LatLng(59.3426606750, 18.0736160278);
				}
				
            });
		//]]>
		</script>
        
	</head>
    <body id="advanced">
        <h1><a href="http://code.google.com/p/jquery-ui-map/">Google maps jQuery plugin</a>(jquery-ui-map) example</h1>
        <div id="events">
            <h3>February 2011</h3>
			<ul class="v-list">
            	<li>
                	<div class="vevent">
                    	<span class="datetime">
                            <abbr title="2011-02-24" class="dtstart">Saturday february 24, 2011</abbr>
                        </span>
                        <span class="summary">jQuery UI Google maps plugin release</span> at
                        <span class="location vcard">  
                            <span class="fn org"><a href="http://code.google.com/">Google code</a></span>
                            <span class="address adr">
                                <span class="street-address">Angered</span>
                                <span class="locality">G&ouml;teborg</span>, <span class="region">G&ouml;teborg</span>
                                <span class="geo hidden">
                                    <abbr title="57.7973333" class="latitude">57.7973333</abbr> 
                                    <abbr title="12.0502107" class="longitude">12.0502107</abbr>
                                </span>
                            </span>
                        </span>
                        <div class="website">Website: <a class="url" href="http://code.google.com/p/jquery-ui-map/" rel="external">http://code.google.com/p/jquery-ui-map/</a></div>
                    </div>
				</li>
            </ul>
            <h3>August 2010</h3>
			<ul class="v-list">
            	<li>
                	<div class="vevent">
                    	<span class="dtstart">
                        	<span class="value">Saturday August 19, 2010</span> at <span class="value">19:00</span>
                         </span>
                         <span class="summary">Microformats + Activity Streams Meetup San Francisco</span> at 
                         <span class="location vcard">
                         	<span class="fn org">Westfield Food Court</span>, 
                            <span class="adr">
                            	<span class="locality">San Francisco</span>, 
                                <span class="region">California</span>.
                            </span>
                            <span class="geo hidden">
                                <abbr class="latitude" title="37.7749295">37.7749295</abbr> 
                                <abbr class="longitude" title="-122.4194155">-122.4194155</abbr>
                            </span>
                        </span> 
                        <div class="website">Website: 
                        	<a class="url" href="http://microformats.org/wiki/events/2010-08-19-dinner-sf" rel="nofollow">http://microformats.org/wiki/events/2010-08-19-dinner-sf</a>
                        </div>
                    </div>
				</li>
            </ul>
        </div>
        <div id="map_canvas"></div>
        <div id="ft" class="hidden">
        	Author: 
            <div id="hcard-Johan-SÃ¤ll-Larsson" class="vcard">
                <span class="fn n">
                    <span class="given-name">Johan</span> 
                    <span class="family-name">S&auml;ll Larsson</span>
                </span>
                <span class="adr">
                    <span class="locality">G&ouml;teborg</span>,
                    <span class="country-name">Sweden</span>
            	</span>
            </div>
        </div>
		<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		</script>
		<script type="text/javascript">
			try {
				var pageTracker = _gat._getTracker("UA-17614686-3");
				pageTracker._trackPageview();
			} catch(err) {}
		</script>
    </body>
</html>



      